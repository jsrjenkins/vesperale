%%% This is the Main tex document that performs the layout. 
%%% You will need to compile this using LuaLaTeX with the --shell-escape option

\documentclass[a4paper,twoside,10pt]{article}%% change size of font to fit in 8 pages

%%% Preferences to change are here.
%%% Note that only the Sundays xiv-xv are supported for the moment
%%% Others will be added later.
\newcommand{\tempus}{adventus}%% what season or proper
\newcommand{\numerus}{iv}%% CHANGE THIS TO WHICH SUNDAY AFTER PENTECOST
\newcommand{\lang}{english} %which language translation. %
%%%% Note that the translation files are in the 'translatio' directory
%%% For the moment only polish is available besides english %

%%%% some other preferences, not necessary to change.
\setlength\parindent{0cm} % Paragraph indentation
\usepackage[top=15mm, bottom=20mm, outer=17mm, inner=17mm]{geometry}% Margins
\usepackage[autocompile]{gregoriotex}% for layout of gregorian chant
\gresetlinecolor{gregoriocolor}%% red score lines in chants

%%%% some experimental preferences, not yet very effective:
%\setlength{\columnsep}{5mm}%% separation between columns
%\setlength{\columnseprule}{0.2pt}%% column rule

%%% For ordinary Sundays after Pentecost [for the moment, others will be added]

%%% You shouldn't need to make modifications after this point,
%%% unless you know what you are doing!

\usepackage{fontspec}% necessary for gregorio
\usepackage{libertine}% the font %
\usepackage{xstring}% for calendar comparisons
\usepackage{paracol}% for parallel columns

\usepackage[latin,\lang]{babel} % the languages for hyphenation, etc.
\usepackage{vesperale} %% vespers style sheet has macros for typesetting
\usepackage{calendar} %% for the selection of propria

\newcommand{\SUNDAY}{\MakeUppercase{\numerus}}
\begin{document}
  \begin{center}%%% TODO: Make this title programmatically. For now, manual edit.
    \huge{\textbf{Dominica ad Vesperas}}\\
    \large{\SUNDAY\ Adventus}%%
  \end{center}
%%%
%%% Initium is calculated according to the office
\initium %% this is defined in the calendar file
%%%%%

\section*{Psalmi}%% Psalms%

\psalterium{1}% macro that places the proper antiphon and psalm according to the \tempus 
\psalterium{2}% see the calendar.sty file
\psalterium{3}
\psalterium{4}
\psalterium{5}
%
\capitulum{\numerus}{\tempus}% Chapter, see calendar.sty

%% hymnarium macro adds section, some offices have no hymn
\hymnarium{\tempus}% hymn according to time

\section*{Canticum}%Magnificat
\canticum{\tempus}{\numerus}

\section*{Oratio}%
\text{oratio-\numerus-\tempus}%%%

\section*{Conclusio}%
\conclusio{\tempus}
%%end of document%
\end{document}%
%%% Emacs stuff %%%

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% TeX-engine: luatex
%%% TeX-command-extra-options: "-shell-escape"
%%% End:

